{"version":3,"sources":["../../../../assets/Script/assets/Script/GameController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uCAAkC;AAClC,uCAAkC;AAClC,6CAA4C;AAC5C,yCAAoC;AACpC,4DAA2D;AAC3D,gDAA+C;AAEzC,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAG5C;IAA4C,kCAAY;IADxD;QAAA,qEAiDC;QA7CG,UAAI,GAAa,IAAI,CAAA;QAGrB,UAAI,GAAa,IAAI,CAAA;QAGrB,WAAK,GAAc,IAAI,CAAA;;IAuC3B,CAAC;IApCG,8BAAK,GAAL;QACI,IAAI,CAAC,aAAa,EAAE,CAAA;QACpB,iCAAe,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAA;IAChF,CAAC;IAED,iCAAiC;IACjC,4CAAmB,GAAnB,UAAoB,KAAe;QAC/B,qBAAS,CAAC,OAAO,GAAG,KAAK,CAAA;QACzB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAA;IAC9B,CAAC;IAEO,sCAAa,GAArB;QACI,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAA;QAClC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,yBAAW,CAAC,SAAS,CAAC,qBAAqB,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;QACvF,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,yBAAW,CAAC,SAAS,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QACnF,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,yBAAW,CAAC,SAAS,CAAC,oBAAoB,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;IAEzF,CAAC;IAEO,yCAAgB,GAAxB;IACA,CAAC;IAEO,uCAAc,GAAtB;QACI,EAAE,CAAC,GAAG,CAAC,UAAU,CAAC,CAAA;QAClB,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;IAC1C,CAAC;IAEO,wCAAe,GAAvB,UAAwB,IAAa;QACjC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAA;IAClC,CAAC;IAGM,4CAAmB,GAA1B,UAA2B,IAAa;QACpC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;QAC/B,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAA;IACzD,CAAC;IA5CD;QADC,QAAQ,CAAC,kBAAQ,CAAC;gDACE;IAGrB;QADC,QAAQ,CAAC,kBAAQ,CAAC;gDACE;IAGrB;QADC,QAAQ,CAAC,mBAAS,CAAC;iDACG;IATN,cAAc;QADlC,OAAO;OACa,cAAc,CAgDlC;IAAD,qBAAC;CAhDD,AAgDC,CAhD2C,EAAE,CAAC,SAAS,GAgDvD;kBAhDoB,cAAc","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import HeroComp from \"./HeroComp\";\nimport HandComp from \"./HandComp\";\nimport { ConstDefine } from \"./ConstDefine\";\nimport BoardComp from \"./BoardComp\";\nimport { LevelDataLoader } from \"./Levels/LevelDataLoader\";\nimport { LevelData } from \"./Levels/LevelData\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class GameController extends cc.Component {\n\n    @property(HeroComp)\n    Hero: HeroComp = null\n\n    @property(HandComp)\n    Hand: HandComp = null\n\n    @property(BoardComp)\n    Board: BoardComp = null\n\n\n    start() {\n        this.initListeners()\n        LevelDataLoader.instance.loadLevelData(1001, this.onLevelDataLoadDone, this)\n    }\n\n    /// 关卡数据加载完成，传递给 BoardComp 加载关卡场景\n    onLevelDataLoadDone(lData:LevelData) {\n        LevelData.CurData = lData\n        this.Board.setBoard(lData)\n    }\n\n    private initListeners() {\n        this.Hand.registerController(this)\n        this.node.on(ConstDefine.EventType.Event_Hand_TouchStart, this.onHandTouchStart, this);\n        this.node.on(ConstDefine.EventType.Event_Hand_TouchEnd, this.onHandTouchEnd, this);\n        this.node.on(ConstDefine.EventType.Event_Hand_TouchMove, this.onHandTouchMove, this);\n\n    }\n\n    private onHandTouchStart() {\n    }\n\n    private onHandTouchEnd() {\n        cc.log(\"fire !!!\")\n        this.moveHeroByDirection(cc.Vec2.ZERO)\n    }\n\n    private onHandTouchMove(dire: cc.Vec2) {\n        this.moveHeroByDirection(dire)\n    }\n\n\n    public moveHeroByDirection(dire: cc.Vec2) {\n        this.Hero.moveByDirection(dire)\n        this.Board.moveBySpeedY(-this.Hero.TargetDirection.y)\n    }\n}\n"]}