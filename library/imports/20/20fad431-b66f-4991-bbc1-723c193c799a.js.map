{"version":3,"sources":["../../../../assets/Script/assets/Script/HandComp.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAI5C,6CAA4C;AAI5C;IAAsC,4BAAY;IADlD;QAAA,qEAkEC;QA9DG,SAAG,GAAc,IAAI,CAAC;QAGtB,YAAM,GAAY,IAAI,CAAC;QAGvB,UAAI,GAAY,IAAI,CAAC;QAGrB,cAAQ,GAAG,GAAG,CAAA;QAGd,WAAK,GAAG,CAAC,CAAA;QAET,WAAK,GAAG,CAAC,GAAG,CAAA;;IAgDhB,CAAC;IA5CG,wBAAK,GAAL;QACI,IAAI,CAAC,aAAa,EAAE,CAAA;IACxB,CAAC;IAED,qCAAkB,GAAlB,UAAmB,UAA0B;QACzC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAA;IAEhC,CAAC;IAEO,gCAAa,GAArB;QACI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QACzE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QACvE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QACrE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IAC5E,CAAC;IAEO,+BAAY,GAApB,UAAqB,KAA0B;QAC3C,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAA;QAClE,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAA;QAC/B,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;QAE7B,IAAI,IAAI,CAAC,UAAU;YACf,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAW,CAAC,SAAS,CAAC,qBAAqB,CAAC,CAAC;IAC/E,CAAC;IAEO,6BAAU,GAAlB,UAAmB,KAA0B;QACzC,IAAI,IAAI,CAAC,UAAU;YACf,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAW,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;QACzE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAA;QAC1B,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAA;QAC1B,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAA;QACxB,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAA;IAC5B,CAAC;IAEO,8BAAW,GAAnB,UAAoB,KAA0B;QAC1C,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAA;QAClE,IAAI,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;QAC/C,IAAI,MAAM,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,QAAQ;YAC5B,MAAM,GAAG,MAAM,CAAC,aAAa,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QACtD,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;QAC3C,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;QAC7B,IAAI,IAAI,CAAC,UAAU;YACf,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAW,CAAC,SAAS,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;IACtF,CAAC;IA7DD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACE;IAGtB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACK;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0CACG;IAGrB;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;8CACP;IAGd;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;2CACZ;IAET;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;2CACT;IAjBK,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAiE5B;IAAD,eAAC;CAjED,AAiEC,CAjEqC,EAAE,CAAC,SAAS,GAiEjD;kBAjEoB,QAAQ","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["const { ccclass, property } = cc._decorator;\n\nimport Utils from \"./Utils\";\nimport GameController from \"./GameController\";\nimport { ConstDefine } from \"./ConstDefine\";\n\n\n@ccclass\nexport default class HandComp extends cc.Component {\n\n    @property(cc.Button)\n    btn: cc.Button = null;\n\n    @property(cc.Node)\n    handBg: cc.Node = null;\n\n    @property(cc.Node)\n    hand: cc.Node = null;\n\n    @property(cc.Integer)\n    distance = 100\n\n    @property(cc.Integer)\n    stayX = 0\n    @property(cc.Integer)\n    stayY = -400\n\n    controller: GameController\n\n    start() {\n        this.initListeners()\n    }\n\n    registerController(controller: GameController) {\n        this.controller = controller\n\n    }\n\n    private initListeners() {\n        this.btn.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n        this.btn.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\n        this.btn.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n        this.btn.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchEnd, this);\n    }\n\n    private onTouchStart(param: cc.Event.EventTouch) {\n        let location = this.node.convertToNodeSpaceAR(param.getLocation())\n        this.handBg.position = location\n        this.hand.position = location\n\n        if (this.controller)\n            this.controller.node.emit(ConstDefine.EventType.Event_Hand_TouchStart);\n    }\n\n    private onTouchEnd(param: cc.Event.EventTouch) {\n        if (this.controller)\n            this.controller.node.emit(ConstDefine.EventType.Event_Hand_TouchEnd);\n        this.handBg.x = this.stayX\n        this.handBg.y = this.stayY\n        this.hand.x = this.stayX\n        this.hand.y = this.stayY\n    }\n\n    private onTouchMove(param: cc.Event.EventTouch) {\n        let location = this.node.convertToNodeSpaceAR(param.getLocation())\n        let direct = location.sub(this.handBg.position)\n        if (direct.mag() > this.distance)\n            direct = direct.normalizeSelf().mul(this.distance)\n        location = direct.add(this.handBg.position)\n        this.hand.position = location\n        if (this.controller)\n            this.controller.node.emit(ConstDefine.EventType.Event_Hand_TouchMove, direct);\n    }\n}\n"]}